package audio {		import flash.events.*;	import flash.media.*;	import flash.utils.ByteArray;		public class AudioLooper extends Sound {				private var src_:ByteArray;				public function AudioLooper(src:Sound, start:int, end:int) { // end == 0 if play til end						src_ = new ByteArray;									//mp3 encoding adds 50 ms of silence to beginning			//start += 50; 						var samplesStart:int = 44100 * start / 1000;			var numSamples:int =   44100 * (end - start) / 1000;			//var numSamples:int =   44100 * ((end == 0 ? src.length - 50 : end + 50) - start) / 1000;						src.extract(src_, numSamples, samplesStart);						src_.position = 0;						addEventListener(SampleDataEvent.SAMPLE_DATA, fill, false, 0, true);					}				private function fill(e:SampleDataEvent):void {									for (var i:int = 0; i < 4096; i++) {								e.data.writeFloat(src_.readFloat());				src_.position = src_.position % src_.length;				e.data.writeFloat(src_.readFloat());				src_.position = src_.position % src_.length;							}					}			}	}